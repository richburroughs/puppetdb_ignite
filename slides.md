footer: Rich Burroughs, Daniel Parks - Puppet SRE
slidenumbers: true
theme: Zurich, 6

^ To do :
^
^ Definition of PuppetDB - Rich
^ Service Discovery - Daniel
^ Queries in Puppet Code - Daniel
^ Requests - Rich
^ PQL

[.footer: ]
[.slidenumbers: false ]
# What Are You Running? PuppetDB Knows.

## Rich Burroughs, Daniel Parks
## Puppet SRE

---

## What is PuppetDB?
> "PuppetDB collects data generated by Puppet. It enables advanced Puppet features like exported resources, and can be the foundation for other applications that use Puppet’s data."

---

## How do I get it?
- Included with Puppet Enterprise
- Open source users can install the puppetlabs/puppetdb module to install and manage it

---

## Puppet Query Language (PQL)

---

inventory { certname ~ "^web" and facts.os.family = "Debian" }
resources { certname ~ "^db" and type = "Postgresql::Server::Database" }
reports { latest_report? = true and certname ~ "^lb" }

---

$ puppet query 'reports[certname,receive_time,environment] { certname = "lb2.example.com" and latest_report? = true }'
[
  {
    "certname": "lb2.example.com",
    "receive_time": "2017-07-21T23:04:11.932Z",
    "environment": "production"
  }
]

---

## Queries in Puppet Code

---

## Service Discovery

---

## Python's Requests Library

